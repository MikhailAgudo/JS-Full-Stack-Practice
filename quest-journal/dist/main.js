(()=>{"use strict";const e=e=>String(e),t=e=>e,n=e=>(e>3?e=3:e<1&&(e=1),e),a=e=>String(e),r=(()=>{let r=[];const s=e=>r[e],d=(e,t)=>r[e].getTask(t);return{quests:r,addQuest:e=>{let t=(e=>{let t=[],n=[];return{getTitle:()=>e,getTasks:()=>t,getTaskAmount:()=>t.length,getTask:e=>t[e],addTask:e=>{t.push(e)},removeTask:e=>{t.splice(e,1)},processSwap:e=>{n.length<2&&(e=>{n.push(e)})(e),n.length>=2&&(()=>{const e=n.shift(),a=n.shift();let r=t[e];t[e]=t[a],t[a]=r})()}}})(e=a(e));r.push(t)},removeQuest:e=>{r.splice(e,1)},getQuests:()=>r,getQuest:s,resetQuests:()=>{r=[]},addTask:(t,n)=>{let a=(e=>({getTitle:()=>title,getDescription:()=>e,getDueDate:()=>dueDate,getPriority:()=>priority,setTitle:e=>{title=e},setDescription:t=>{e=t},setDueDate:e=>{dueDate=e},setPriority:e=>{priority=e}}))(t=e(t));s(n).addTask(a)},removeTask:(e,t)=>{s(e).removeTask(t)},renameTitle:(t,n,a)=>{a=e(a),d(t,n).setTitle(a)},changeDescription:(t,n,a)=>{a=e(a),d(t,n).setDescription(a)},changeDate:(e,n,a)=>{a=t(a),d(e,n).setDueDate(a)},changePriority:(e,t,a)=>{a=n(a),d(e,t).setPriority(a)}}})(),s={render:(e,t,n)=>{let a=document.createElement("div");a.classList.add("task-container");let s=(e=>{let t=document.createElement("div");return t.classList.add("task-area"),t.textContent=e,t})(e.getDescription()),d=((e,t)=>{let n=document.createElement("button");return n.textContent="Done",n.addEventListener("click",(n=>{r.removeTask(e,t),l.renderTaskTab()})),n})(t,n);return a.appendChild(d),a.appendChild(s),a}},d=(()=>{let e=!1,t=!1;const n=()=>{e=!1===e},a=()=>{t=!1===t},s=e=>{let t=document.createElement("input");return t.type="text",t.placeholder=e,t};return{getNewQuestPrompt:()=>e,getNewTaskPrompt:()=>t,createAddQuestButton:()=>{let e=document.createElement("button");return e.textContent="New Quest",e.addEventListener("click",(e=>{n(),l.renderQuestTab()})),e},createAddQuestPrompt:()=>{let e=document.createElement("div"),t=s("Quest name..."),a=(e=>{let t=document.createElement("button");return t.textContent="Add",t.addEventListener("click",(t=>{r.addQuest(e.value),n(),l.renderQuestTab()})),t})(t);return e.appendChild(t),e.appendChild(a),e},createAddTaskButton:()=>{let e=document.createElement("button");return e.textContent="New Task",e.addEventListener("click",(()=>{a(),l.renderTaskTab()})),e},createAddTaskPrompt:()=>{let e=document.createElement("div"),t=s("Task name..."),n=(e=>{let t=document.createElement("button");return t.textContent="Add",t.addEventListener("click",(()=>{let t=l.getDisplayedQuestIndex();r.addTask(e.value,t),a(),l.renderTaskTab()})),t})(t);return e.appendChild(t),e.appendChild(n),e}}})(),i=(()=>{const e=(t,n,a,r)=>{if(-1===a)return n;switch(r){case"title":n.unshift(t[a].getTitle());break;case"description":n.unshift(t[a].getDescription());break;case"date":n.unshift(t[a].getDueDate())}return e(t,n,a-=1,r)};return{transformToUIReadable:e,questsToTitles:e=>{let t=[];for(let n=0;n<e.length;n++){let a=e[n].getTitle();t.push(a)}return t}}})(),l=(()=>{let e=0,t=document.createElement("div"),n=document.createElement("div");const a=()=>(t.classList.add("quest-section"),t),l=()=>(n.classList.add("task-section"),n),u=()=>{k(),o();let e=v();c(e)},o=()=>{let e=null;e=!0===d.getNewQuestPrompt()?d.createAddQuestPrompt():d.createAddQuestButton(),t.appendChild(e)},c=e=>{for(let n=0;n<e.length;n++){let a=p(e,n);t.appendChild(a)}},p=(e,t)=>{let n=document.createElement("button");return n.textContent=e[t],n.dataset.index=t,n.addEventListener("click",(e=>{Q(t)})),n},T=()=>{h(),g();let e=D();m(e)},g=()=>{let e=null;e=!0===d.getNewTaskPrompt()?d.createAddTaskPrompt():d.createAddTaskButton(),n.appendChild(e)},m=t=>{for(let a=0;a<t.length;a++){let r=s.render(t[a],e,a);n.appendChild(r)}},k=()=>{t.innerHTML=""},h=()=>{n.innerHTML=""},Q=t=>{e=t,v(),u(),D(),T()},v=()=>i.questsToTitles(r.quests),D=()=>r.quests[e].getTasks();return{initializeJournal:()=>{let e=document.querySelector(".journal-section"),t=a(),n=l();e.appendChild(t),e.appendChild(n)},renderQuestTab:u,renderTaskTab:T,getDisplayedQuestIndex:()=>e,getQuestTitles:v,getTasks:D}})();({initializeJournal:()=>{l.initializeJournal(),r.addQuest("Joining the Legion"),r.addTask("In order to prove myself to Legate Rikke, I am to clear out the bandits living at Fort Hraggstad.",0),r.addTask("Report to Legate Rikke.",0),r.addQuest("The Jagged Crown"),r.addQuest("Message to Whiterun"),(()=>{let e=l.getQuestTitles();l.renderQuestTab(e),l.getDisplayedQuestIndex(),l.renderTaskTab(l.getTasks())})()}}).initializeJournal()})();