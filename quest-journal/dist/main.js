(()=>{"use strict";const e=e=>String(e),t=e=>e,n=e=>(e>3?e=3:e<1&&(e=1),e),s=e=>String(e),r=(()=>{let r=[];const a=e=>r[e],i=(e,t)=>r[e].getTask(t);return{quests:r,addQuest:e=>{let t=(e=>{let t=[],n=[];return{getTitle:()=>e,getTasks:()=>t,getTaskAmount:()=>t.length,getTask:e=>t[e],addTask:e=>{t.push(e)},removeTask:e=>{t.splice(e,1)},processSwap:e=>{n.length<2&&(e=>{n.push(e)})(e),n.length>=2&&(()=>{const e=n.shift(),s=n.shift();let r=t[e];t[e]=t[s],t[s]=r})()}}})(e=s(e));r.push(t)},removeQuest:e=>{r.splice(e,1)},getQuests:()=>r,getQuest:a,resetQuests:()=>{r=[]},addTask:(s,r,i,d,l)=>{let o=((e,t,n,s)=>({getTitle:()=>e,getDescription:()=>t,getDueDate:()=>n,getPriority:()=>s,setTitle:t=>{e=t},setDescription:e=>{t=e},setDueDate:e=>{n=e},setPriority:e=>{s=e}}))(s=e(s),r=e(r),i=t(i),d=n(d));a(l).addTask(o)},removeTask:(e,t)=>{a(e).removeTask(t)},renameTitle:(t,n,s)=>{s=e(s),i(t,n).setTitle(s)},changeDescription:(t,n,s)=>{s=e(s),i(t,n).setDescription(s)},changeDate:(e,n,s)=>{s=t(s),i(e,n).setDueDate(s)},changePriority:(e,t,s)=>{s=n(s),i(e,t).setPriority(s)}}})(),a={render:(e,t,n)=>{let s=document.createElement("div"),a=document.createElement("div");a.textContent=e.getTitle();let i=document.createElement("div");i.textContent=e.getDescription(),document.createElement("div").textContent=e.getDueDate(),document.createElement("div").textContent=e.getPriority();let d=((e,t)=>{let n=document.createElement("button");return n.textContent="del",n.addEventListener("click",(n=>{r.removeTask(e,t),l.renderTaskTab()})),n})(t,n);return s.appendChild(a),s.appendChild(i),s.appendChild(d),s}},i=(()=>{let e=!1;const t=()=>{e=!1===e};return{getNewQuestPrompt:()=>e,getNewTaskPrompt:()=>false,createAddQuestButton:()=>{let e=document.createElement("button");return e.textContent="New Quest",e.addEventListener("click",(e=>{t(),l.renderQuestTab()})),e},createAddQuestPrompt:()=>{let e=document.createElement("div"),n=(e=>{let t=document.createElement("input");return t.type="text",t.placeholder=e,t})("Quest Name..."),s=(e=>{let n=document.createElement("button");return n.textContent="Add",n.addEventListener("click",(n=>{console.log(e.value),r.addQuest(e.value),t(),l.renderQuestTab()})),n})(n);return e.appendChild(n),e.appendChild(s),e}}})(),d=(()=>{const e=(t,n,s,r)=>{if(-1===s)return n;switch(r){case"title":n.unshift(t[s].getTitle());break;case"description":n.unshift(t[s].getDescription());break;case"date":n.unshift(t[s].getDueDate())}return e(t,n,s-=1,r)};return{transformToUIReadable:e,questsToTitles:e=>{let t=[];for(let n=0;n<e.length;n++){let s=e[n].getTitle();t.push(s)}return t}}})(),l=(()=>{let e=0,t=document.createElement("div"),n=document.createElement("div");const s=()=>(t.classList.add("quest-section"),t),l=()=>(n.classList.add("task-section"),n),o=()=>{T(),u();let e=Q();c(e)},u=()=>{let e=i.createAddQuestButton();if(t.appendChild(e),!0===i.getNewQuestPrompt()){let e=i.createAddQuestPrompt();t.appendChild(e)}},c=e=>{for(let n=0;n<e.length;n++){let s=g(e,n);t.appendChild(s)}},g=(e,t)=>{let n=document.createElement("button");return n.textContent=e[t],n.dataset.index=t,n.addEventListener("click",(e=>{k(t)})),n},p=()=>{h();let e=v();m(e)},m=t=>{for(let s=0;s<t.length;s++){let r=a.render(t[s],e,s);n.appendChild(r)}},T=()=>{t.innerHTML=""},h=()=>{n.innerHTML=""},k=t=>{e=t,Q(),o(),v(),p()},Q=()=>d.questsToTitles(r.quests),v=()=>r.quests[e].getTasks();return{initializeJournal:()=>{let e=document.querySelector(".journal-section"),t=s(),n=l();e.appendChild(t),e.appendChild(n)},renderQuestTab:o,renderTaskTab:p,getDisplayedQuestIndex:()=>e,getQuestTitles:Q,getTasks:v}})();({initializeJournal:()=>{l.initializeJournal(),r.addQuest("Joining the Legion"),r.addTask("Legate Rikke","In order to prove myself to Legate Rikke, I am to clear out the bandits living at Fort Hraggstad.","tomorrow Pepeg","1",0),r.addTask("Prove Your Usefulness","Report to Legate Rikke.","tomorrow Pepeg","1",0),r.addQuest("The Jagged Crown"),r.addQuest("Message to Whiterun"),(()=>{let e=l.getQuestTitles();l.renderQuestTab(e),l.getDisplayedQuestIndex(),l.renderTaskTab(l.getTasks())})()}}).initializeJournal()})();